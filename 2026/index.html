<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Happy New Year 2026</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: linear-gradient(
          180deg,
          #0f172a 0%,
          #312e81 40%,
          #831843 100%
        );
        font-family: Arial, Helvetica, sans-serif;
      }

      canvas {
        position: absolute;
        inset: 0;
      }

      #musicBtn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 9999;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 12px 18px;
        border-radius: 30px;
        cursor: pointer;
        font-size: 14px;
        transition: 0.3s;
      }

      #musicBtn:hover {
        background: rgba(255, 255, 255, 0.35);
      }
    </style>
  </head>

  <body>
    <!-- ðŸŽµ MUSIC -->
    <audio id="bgMusic" loop>
      <source src="music.mp3" type="audio/mpeg" />
    </audio>

    <button id="musicBtn">ðŸ”Š Play Music</button>

    <!-- ðŸŽ† CANVAS -->
    <canvas></canvas>
    <canvas></canvas>

    <script>
      /* ===== MUSIC CONTROL ===== */
      const music = document.getElementById("bgMusic");
      const musicBtn = document.getElementById("musicBtn");
      let isPlaying = false;

      musicBtn.onclick = () => {
        if (!isPlaying) {
          music.play();
          musicBtn.textContent = "ðŸ”‡ Pause Music";
        } else {
          music.pause();
          musicBtn.textContent = "ðŸ”Š Play Music";
        }
        isPlaying = !isPlaying;
      };

      document.addEventListener(
        "click",
        () => {
          if (!isPlaying) {
            music.play();
            musicBtn.textContent = "ðŸ”‡ Pause Music";
            isPlaying = true;
          }
        },
        { once: true }
      );

      /* ===== FIREWORK ===== */
      const [cText, cFx] = document.querySelectorAll("canvas");
      const ctxText = cText.getContext("2d");
      const ctxFx = cFx.getContext("2d");

      cFx.width = innerWidth;
      cFx.height = innerHeight;

      const rockets = [];
      const shards = [];
      const targets = [];
      const fidelity = 3;

      let fontSize = 200;
      const text = "HAPPY NEW YEAR\n2026";

      function resize() {
        cFx.width = innerWidth;
        cFx.height = innerHeight;
      }
      window.addEventListener("resize", resize);

      ctxText.font = `900 ${fontSize}px Arial`;
      let textWidth = ctxText.measureText("HAPPY NEW YEAR 2026").width;

      while (textWidth > innerWidth) {
        fontSize--;
        ctxText.font = `900 ${fontSize}px Arial`;
        textWidth = ctxText.measureText("HAPPY NEW YEAR 2026").width;
      }

      cText.width = textWidth;
      cText.height = fontSize * 2;

      ctxText.font = `900 ${fontSize}px Arial`;
      ctxText.fillStyle = "#fff";
      ctxText.textAlign = "center";
      ctxText.fillText("HAPPY NEW YEAR", textWidth / 2, fontSize);
      ctxText.fillText("2026", textWidth / 2, fontSize * 1.9);

      const imgData = ctxText.getImageData(0, 0, cText.width, cText.height);
      for (let i = 0; i < imgData.data.length; i += 4) {
        if (imgData.data[i + 3]) {
          const x = (i / 4) % imgData.width;
          const y = Math.floor(i / 4 / imgData.width);
          if (x % fidelity === 0 && y % fidelity === 0) {
            targets.push({ x, y });
          }
        }
      }

      class Shard {
        constructor(x, y, hue) {
          this.x = x;
          this.y = y;
          this.hue = hue;
          this.size = 8 + Math.random() * 6;
          const a = Math.random() * Math.PI * 2;
          const s = 1 + Math.random() * 5;
          this.vx = Math.cos(a) * s;
          this.vy = Math.sin(a) * s;
          this.target = getTarget();
        }

        draw() {
          ctxFx.fillStyle = `hsl(${this.hue},80%,70%)`;
          ctxFx.beginPath();
          ctxFx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctxFx.fill();
        }

        update() {
          if (this.target) {
            const dx = this.target.x - this.x;
            const dy = this.target.y - this.y;
            const d = Math.hypot(dx, dy);
            const a = Math.atan2(dy, dx);
            this.vx += Math.cos(a) * 0.2;
            this.vy += Math.sin(a) * 0.2;
            this.size *= 0.98;
            if (d < 4) this.target = null;
          }
          this.x += this.vx;
          this.y += this.vy;
        }
      }

      class Rocket {
        constructor() {
          this.x = Math.random() * innerWidth;
          this.y = innerHeight;
          this.vy = -8 - Math.random() * 4;
          this.hue = [190, 220, 280, 320, 45][(Math.random() * 5) | 0];
        }

        update() {
          this.y += this.vy;
          this.vy += 0.15;
          if (this.vy > 0) this.explode();
        }

        explode() {
          for (let i = 0; i < 60; i++) {
            shards.push(new Shard(this.x, this.y, this.hue));
          }
          rockets.splice(rockets.indexOf(this), 1);
        }
      }

      function getTarget() {
        if (!targets.length) return null;
        const t = targets.splice((Math.random() * targets.length) | 0, 1)[0];
        return {
          x: t.x + innerWidth / 2 - textWidth / 2,
          y: t.y + innerHeight / 2 - fontSize,
        };
      }

      function loop() {
        ctxFx.fillStyle = "rgba(15,23,42,0.25)";
        ctxFx.fillRect(0, 0, innerWidth, innerHeight);

        if (Math.random() < 0.05) rockets.push(new Rocket());

        rockets.forEach((r) => r.update());
        shards.forEach((s) => {
          s.update();
          s.draw();
        });

        requestAnimationFrame(loop);
      }

      loop();
    </script>
  </body>
</html>
